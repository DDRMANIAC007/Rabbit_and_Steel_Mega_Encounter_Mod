newPattern,mbp_dragon_fight1_0a,
##golden dragon
time,0,
zoom,0.9,
setExpMult,1,1,
setFlags,24,
pattVarReset,
syncRandomSeed,
setVar,ang,randomRange(0>360)+180,
setVar,R,350,
setVar,dang,0.5,
setVar,num,0,
move,bfCenterX+R*sin(ang),bfCenterY+R*cos(ang),1500,
dialog,2000,d_dragon_gold_0_3,
,,,
timeRepeating,2000,150,
facePoint,bfCenterX,
setVar,ex,bfCenterX+R*sin(ang)
setVar,ey,bfCenterY+R*cos(ang)
setVar,ang,(ang+(8+dang*num))%360,
setVar,num,num+1,
setVar,R,350+num%80,
pattVars,x;(bfCenterX+R*sin(ang))*2-ex,y;(bfCenterY+R*cos(ang))*2-ey,duration;300,spawnDelay;500,resetAnim;0,
pattAdd,bp_move_position_synced,
,,,
timeRepeating,5500,5000
condDifficultyCheck,0,0,1,
pattVars,warningDelay;0,spawnDelay;3000,timeBetween;700,width;200,widthInc;120,num;3,angle;0,
pattVars,x;bfMinX-100,y;bfCenterY+R*cos(ang+180),
pattAdd,bp_ray_enlarge_single,
pattVars,angle;90,x;bfCenterX+R*sin(ang),y;bfMinY-100,
pattAdd,bp_ray_enlarge_single,
,,,
timeRepeating,6500,7000
condDifficultyCheck,1,1,0,
pattVars,warningDelay;0,spawnDelay;3000,timeBetween;700,width;200,widthInc;120,num;3,angle;0,
pattVars,x;bfMinX-100,y;bfCenterY+R*cos(ang+180),
pattAdd,bp_ray_enlarge_single,
pattVars,angle;90,x;bfCenterX+R*sin(ang),y;bfMinY-100,
pattAdd,bp_ray_enlarge_single,
,,,
timeRepeating,2000,3000,
pattVars,warningDelay;0,spawnDelay;4000,radius;680,angle;randomRange(0>360),number;40,spd;6,element;red,doubled;1,warnMsg;0,x;bfCenterX,y;bfCenterY,
pattAdd,bp_prscircle,
,,,
time,48000
pattAdd,enrage_common,
,,,
,,,
,,,
,,,
newPattern,mbp_dragon_fight1_0b,
##silver dragon
time,0,
pattVarReset,
syncRandomSeed,
setVar,ang,randomRange(0>360),
setVar,R,350,
setVar,dang,0.5,
setVar,num,0,
move,bfCenterX+R*sin(ang),bfCenterY+R*cos(ang),1500,
dialog,2000,d_dragon_silver_0_3,
,,,
timeRepeating,2000,150,
facePoint,bfCenterX,
setVar,ex,bfCenterX+R*sin(ang)
setVar,ey,bfCenterY+R*cos(ang)
setVar,ang,(ang+(8+dang*num))%360,
setVar,num,num+1,
setVar,R,350+num%80,
pattVars,x;(bfCenterX+R*sin(ang))*2-ex,y;(bfCenterY+R*cos(ang))*2-ey,duration;300,spawnDelay;500,resetAnim;0,
pattAdd,bp_move_position_synced,
,,,
timeRepeating,3000,5000,
condDifficultyCheck,0,0,1,
pattVars,warningDelay;0,spawnDelay;3000,timeBetween;700,scale;1.1,scaleInc;0.6,num;3,type;0,
pattPosition,bfCenterX+R*sin(ang);bfCenterY+R*cos(ang),bfCenterX+R*sin(ang+180);bfCenterY+R*cos(ang+180),
pattAdd,bp_bullet_enlarge,
,,,
timeRepeating,3000,7000,
condDifficultyCheck,1,1,0,
pattVars,warningDelay;0,spawnDelay;3000,timeBetween;700,scale;1.1,scaleInc;0.6,num;3,type;0,
pattPosition,bfCenterX+R*sin(ang);bfCenterY+R*cos(ang),bfCenterX+R*sin(ang+180);bfCenterY+R*cos(ang+180),
pattAdd,bp_bullet_enlarge,
,,,
timeRepeating,5000,2500,
condDifficultyCheck,0,0,1,
orderBinRandom,1,1,1,1,
pattVars,warningDelay;0,spawnDelay;3000,radius;200,trgBinary;orderBin0|orderBin1,warnMsg;2,
pattAdd,bp_circle_spreads,
,,,
timeRepeating,5000,3500,
condDifficultyCheck,1,1,0,
orderBinRandom,1,1,1,1,
pattVars,warningDelay;0,spawnDelay;3000,radius;200,trgBinary;orderBin0,warnMsg;2,
pattAdd,bp_circle_spreads,
,,,
time,48000
pattAdd,enrage_common,
,,,
,,,
,,,
,,,
,,,
,,,
newPattern,mbp_dragon_fight1_1a,
##golden dragon
time,0,
zoom,0.78,
setExpMult,1,1,
move,bfCenterX+400,bfCenterY,2000
dialog,2000,d_dragon_gold_0_0,
,,,
timeRepeating,2000,14000,
syncRandomSeed,
setVar,sign1,randomSign,
setVar,sign2,randomSign,
pattVars,offX_0;sign1,offY_0;sign2,
animation,0,1000,5000,
pattAdd,lasertypeG,
,,,
timeRepeating,2000,6000,
pattVars,warningDelay;0,spawnDelay;4000,radius;700,angle;randomRange(0>360),number;40,spd;6,element;red,doubled;1,warnMsg;0,x;bfCenterX,y;bfCenterY,
pattAdd,bp_prscircle,
,,,
time,48000
pattAdd,enrage_common,
,,,
,,,
,,,
,,,
newPattern,mbp_dragon_fight1_1b,
##silver dragon
time,0,
pattVarReset,
move,bfCenterX,bfCenterY,2000,
dialog,2000,d_dragon_silver_0_0,
,,,
timeRepeating,2000,14000,
animation,0,1000,5000,
syncRandomSeed,
setVar,sign1,randomSign,
setVar,sign2,randomSign,
pattVars,offX_0;sign1,offY_0;sign2,
pattAdd,lasertypeS,
,,,
timeRepeating,9000,14000,
condDifficultyCheck,0,0,1,
setVar,sign1,randomSign,
setVar,sign2,randomSign,
pattVars,warningDelay;0,spawnDelay;3000,timeBetween;500,scale;1.1,scaleInc;0.7,num;5,type;0,
pattPosition,bfCenterX+400*sign1;bfCenterY+400*sign2,bfCenterX-400*sign1;bfCenterY-400*sign2,
pattAdd,bp_bullet_enlarge,
,,,
timeRepeating,6000,14000,
faceRandom,
setVar,sign,randomSign,
orderBinRandom,1,1,1,1
,,,
timeRepeating,8000,14000,
animation,0,2000,6000,
condDifficultyCheck,0,0,1,
condVarCheck,sign,>,0,
pattVars,warningDelay;2000,spawnDelay;6500,radius;200,trgBinary;orderBin0|orderBin2,warnMsg;2,hasFixed;0,element;red,
pattAdd,bp_colormatch,
pattVars,trgBinary;orderBin1|orderBin3,element;blue,
pattAdd,bp_colormatch,
,,,
timeRepeating,8000,14000,
condDifficultyCheck,1,1,0,
condVarCheck,sign,>,0,
pattVars,warningDelay;2000,spawnDelay;5000,radius;200,trgBinary;all,warnMsg;2,
pattAdd,bp_circle_spreads,
,,,
timeRepeating,8000,14000,
condVarCheck,sign,<,0,
pattVars,warningDelay;2000,spawnDelay;5000,radius;250,trgBinary;orderBin0|orderBin1,warnMsg;2,number;40,spd;9,element;red,doubled;0,
pattAdd,bp_prscircle_follow_bin,
,,,
timeRepeating,5000,6000,
pattVars,warningDelay;0,spawnDelay;4000,radius;700,angle;randomRange(0>360),number;40,spd;6,element;red,doubled;1,warnMsg;0,x;bfCenterX,y;bfCenterY,
pattAdd,bp_prscircle,
,,,
time,48000
pattAdd,enrage_common,
,,,
,,,
,,,
,,,
newPattern,lasertypeG,
time,0,
pattVarReset,
setVar,R,600,
setVar,sign1,offX_0,
setVar,sign2,offY_0,
setVar,ang,90*sign2,
move,bfCenterX+(R/2+50)*sign1,bfCenterY,1000
,,,
time,1500,
pattVars,warningDelay;0,spawnDelay;4500,warnMsg;0,x;enemyX-50*sign1*sign2,y;enemyY,
pattAdd,bp_move_warning,
,,,
time,1500,
pattVars,warningDelay;0,spawnDelay;3000,eraseDelay;3000,radius;200,num;1,rot;90-90*sign1,angle;-1*sign1*sign2,width;200,x;enemyX,y;enemyY,
pattAdd,bp_ray_spinfast,
pattVars,warningDelay;3000,spawnDelay;3000,eraseDelay;3800,radius;200,num;1,rot;90-90*sign1,speedMult;-4.5*sign1*sign2,width;200,shouldMove;1,
pattAdd,bp_ray_spinning,
pattVars,x;bfCenterX,y;bfCenterY+R*sign2,duration;1000,spawnDelay;3000,resetAnim;0,
pattAdd,bp_move_position_synced,
pattVars,warningDelay;4000,spawnDelay;4000,eraseDelay;4300,radius;200,num;1,rot;-90*sign2,speedMult;0,width;200,shouldMove;1,
pattAdd,bp_ray_spinning,
,,,
timeRepeatTimes,5500,150,24,
facePoint,bfCenterX,
setVar,ex,bfCenterX+R*cos(ang),
setVar,ey,bfCenterY+R*sin(ang),
setVar,ang,ang+15*sign1,
pattVars,x;(bfCenterX+R*cos(ang))*2-ex,y;(bfCenterY+R*sin(ang))*2-ey,duration;300,spawnDelay;500,resetAnim;0,
pattAdd,bp_move_position_synced,
pattVars,warningDelay;600,spawnDelay;700,eraseDelay;1100,x;bfCenterX+R*cos(ang),y;bfCenterY+R*sin(ang),angle;ang-diffSwitch(90>90>135)*sign2,width;200,
pattAdd,bp_ray_single,
pattVars,x;bfCenterX-R*cos(ang),y;bfCenterY-R*sin(ang),angle;ang-diffSwitch(90>90>135)*sign2+180,
pattAdd,bp_ray_single,
,,,
time,9550,
pattVars,x;bfCenterX,y;bfCenterY+R*sign2,duration;50,spawnDelay;0,resetAnim;0,
pattAdd,bp_move_position_synced,
,,,
,,,
,,,
newPattern,lasertypeS,
time,0,
setVar,sign1,offX_0,
setVar,sign2,offY_0,
,,,
time,1500,
pattVars,warningDelay;4500,spawnDelay;4500,eraseDelay;7800,radius;200,num;2,rot;-90*sign2,speedMult;5*sign1,width;200,
pattAddPos,bp_ray_spinning,bfCenterX,bfCenterY,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
newPattern,mbp_dragon_fight2_0,
time,0,
zoom,1,
setExpMult,1,1,
pattVarReset,
move,bfCenterX,bfCenterY,2000,
,,,
time,1000,
dialog,3000,d_dragon_emerald_0_2,
setVar,zoo,1,
setVar,wid,130/zoo,
setVar,dx,180/zoo,
setVar,turn,0,
setVar,maxturn,10,
setVar,sign,1,
setVar,randx,randomRange(-wid/3>wid/3),
setVar,randx2,randomRange(-wid/3>wid/3),
,,,
timeRepeating,2900,400,
condDifficultyCheck,0,0,1,
pattVars,warningDelay;100,warningDelay2;1500,spawnDelay;2100,eraseDelay;2300,rot;0,width;wid,
pattAddPos,bp_cardinal_r,bfMinX+(wid/2+dx*turn)+randx,bfCenterY-(bfCenterY+wid+dx)*sign,
pattAddPos,bp_cardinal_r,bfMaxX-(wid/2+dx*turn)+randx2,bfCenterY-(bfCenterY+wid+dx)*sign,
timeRepeating,3000,400,
condDifficultyCheck,0,0,1,
pattVars,warningDelay;0,warningDelay2;2000,spawnDelay;2000,eraseDelay;1000,rot;0,width;wid,
pattAddPos,bp_cardinal_r,bfMinX+(wid/2+dx*turn)+randx,bfCenterY+(bfCenterY-wid/2)*sign,
pattAddPos,bp_cardinal_r,bfMaxX-(wid/2+dx*turn)+randx2,bfCenterY+(bfCenterY-wid/2)*sign,
setVar,turn,turn+sign,
condVarCheck,turn*(turn-maxturn),==,0,
setVar,sign,-sign,
setVar,randx,randomRange(-wid/3>wid/3),
setVar,randx2,randomRange(-wid/3>wid/3),
,,,
timeRepeating,2800,4000,
condDifficultyCheck,0,0,1,
setVar,sign1,randomSign,
orderBinRandom,1,1,1,1,
pattVars,spawnDelay;0,eraseDelay;3000,type;2,trgBinary;orderBin0|orderBin2,offY;0,offX;wid*3.8*sign1,
pattAdd,bp_teleport_bin,
pattVars,trgBinary;orderBin1|orderBin3,offX;-wid*3.8*sign1,
pattAdd,bp_teleport_bin,
timeRepeating,3800,4000,
condDifficultyCheck,0,0,1,
pattVars,spawnDelay;0,eraseDelay;4000,type;1,trgBinary;orderBin0|orderBin2,offX;-wid*4.5*sign1,
pattAdd,bp_teleport_bin,
pattVars,trgBinary;orderBin1|orderBin3,offX;wid*4.5*sign1,
pattAdd,bp_teleport_bin,
,,,
timeRepeating,5500,4000,
condDifficultyCheck,0,0,1,
condVarCheck,allyNum,>,2,
orderBinRandom,1,1,1,1,
pattVars,warningDelay;0,spawnDelay;3000,radius;200,trgBinary;orderBin0|orderBin2,warnMsg;2,hasFixed;0,element;red,
pattAdd,bp_colormatch,
pattVars,trgBinary;orderBin1|orderBin3,element;blue,
pattAdd,bp_colormatch,
,,,
timeRepeating,5500,4000,
condDifficultyCheck,0,0,1,
condVarCheck,allyNum,<,3,
orderBinChaos,2,
pattVars,warningDelay;0,spawnDelay;3000,radius;200,trgBinary;orderBin0,warnMsg;2,hasFixed;0,element;red,
pattAdd,bp_colormatch,
pattVars,trgBinary;orderBin1,element;blue,
pattAdd,bp_colormatch,
,,,
timeRepeating,3000,8000,
faceRandom,
animation,0,3000,6000,
,,,
,,,
timeRepeating,2900,600,
condDifficultyCheck,1,1,0,
pattVars,warningDelay;100,warningDelay2;1400,spawnDelay;2100,eraseDelay;2250,rot;0,width;wid,
pattAddPos,bp_cardinal_r,bfMinX+(wid/2+dx*turn)+randx,bfCenterY-(bfCenterY+wid+dx)*sign,
pattAddPos,bp_cardinal_r,bfMaxX-(wid/2+dx*turn)+randx2,bfCenterY-(bfCenterY+wid+dx)*sign,
timeRepeating,3000,600,
condDifficultyCheck,1,1,0,
pattVars,warningDelay;0,warningDelay2;2000,spawnDelay;2000,eraseDelay;1000,rot;0,width;wid,
pattAddPos,bp_cardinal_r,bfMinX+(wid/2+dx*turn)+randx,bfCenterY+(bfCenterY-wid/2)*sign,
pattAddPos,bp_cardinal_r,bfMaxX-(wid/2+dx*turn)+randx2,bfCenterY+(bfCenterY-wid/2)*sign,
setVar,turn,turn+sign,
condVarCheck,turn*(turn-maxturn),==,0,
setVar,sign,-sign,
setVar,randx,randomRange(-wid/3>wid/3),
setVar,randx2,randomRange(-wid/3>wid/3),
,,,
timeRepeating,2800,6000,
condDifficultyCheck,1,1,0,
setVar,sign1,randomSign,
orderBinRandom,1,1,1,1,
pattVars,spawnDelay;0,eraseDelay;4000,type;2,trgBinary;orderBin0|orderBin2,offY;0,offX;wid*4.5*sign1,
pattAdd,bp_teleport_bin,
pattVars,trgBinary;orderBin1|orderBin3,offX;-wid*4.5*sign1,
pattAdd,bp_teleport_bin,
timeRepeating,3800,6000,
condDifficultyCheck,1,1,0,
pattVars,spawnDelay;0,eraseDelay;6000,type;1,trgBinary;orderBin0|orderBin2,offX;-wid*5.5*sign1,
pattAdd,bp_teleport_bin,
pattVars,trgBinary;orderBin1|orderBin3,offX;wid*5.5*sign1,
pattAdd,bp_teleport_bin,
,,,
time,48000
pattAdd,enrage_common,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
,,,
newPattern,mbp_dragon_fight2_1,
time,0,
zoom,1,
setExpMult,1,1,
pattVarReset,
move,bfCenterX,bfCenterY-140,2000,
,,,
time,1000,
dialog,3000,d_dragon_emerald_0_1,
setVar,dx,800,
setVar,dy1,-200,
setVar,dy2,480,
setVar,wid,300,
setVar,warnD,1000,
setVar,spawnD,5000,
setVar,spawnDt,1500,
,,,
timeRepeating,2100,15000,
setVar,roll,randomSign,
setVar,sign1,randomSign,
setVar,sign2,randomSign,
setVar,turn,0,
setDiceRoll,card1,1,2,
setDiceRoll,card2,4,5,
faceRandom,
animation,0,6000,12000,
,,,
,,,
timeRepeating,2200,15000,
pattVars,offX_0;enemyX+dx*roll,offY_0;enemyY+dy1,offX_1;warnD,offY_1;spawnD+spawnDt*turn,offX_2;(card1-turn-1)*(card2-turn-1),offY_2;wid,offX_3;turn+1,
pattAdd,add_card_circle,
setVar,turn,(turn+1)%5,
,,,
timeRepeating,2700,15000,
pattVars,offX_0;enemyX+dx*roll,offY_0;enemyY+dy2,offX_1;warnD,offY_1;spawnD+spawnDt*turn,offX_2;(card1-turn-1)*(card2-turn-1),offY_2;wid,offX_3;turn+1,
pattAdd,add_card_circle,
condDifficultyCheck,0,0,1,
pattVars,warningDelay;warnD,spawnDelay;spawnD+spawnDt*turn,trgBinary;all,fanAngle;180-60*sign1,numCones;1,rot_0;90*sign1,
pattAddPos,bp_cone_direction,enemyX,enemyY,
,,,
timeRepeating,3200,15000,
setVar,turn,(turn+1)%5,
pattVars,offX_0;enemyX,offY_0;enemyY+dy2,offX_1;warnD,offY_1;spawnD+spawnDt*turn,offX_2;(card1-turn-1)*(card2-turn-1),offY_2;wid,offX_3;turn+1,
pattAdd,add_card_circle,
setVar,turn,(turn+1)%5,
,,,
timeRepeating,3700,15000,
pattVars,offX_0;enemyX-dx*roll,offY_0;enemyY+dy2,offX_1;warnD,offY_1;spawnD+spawnDt*turn,offX_2;(card1-turn-1)*(card2-turn-1),offY_2;wid,offX_3;turn+1,
pattAdd,add_card_circle,
setVar,turn,(turn+1)%5,
,,,
timeRepeating,4200,15000,
pattVars,offX_0;enemyX-dx*roll,offY_0;enemyY+dy1,offX_1;warnD,offY_1;spawnD+spawnDt*turn,offX_2;(card1-turn-1)*(card2-turn-1),offY_2;wid,offX_3;turn+1,
pattAdd,add_card_circle,
setVar,turn,(turn+1)%5,
,,,
timeRepeating,5200,15000,
condDifficultyCheck,0,0,1,
pattVars,warningDelay;warnD-500,spawnDelay;spawnD+spawnDt*5,trgBinary;all,fanAngle;180+60*sign1,numCones;1,rot_0;-90*sign1,
pattAddPos,bp_cone_direction,enemyX,enemyY,
pattVars,displayNumber;6,warnMsg;2,
pattPosition,enemyX+200*sign1;enemyY,
pattAdd,bp_displaynumbers,
,,,
timeRepeating,5400,15000,
condDifficultyCheck,0,0,1,
pattVars,warningDelay;0,spawnDelay;2700+spawnD+spawnDt*turn-5400,warnMsg;0,rot_0;180,
pattPosition,bfMinX-400;bfCenterY,
pattAdd,bp_cleave_fixed,
pattVars,spawnDelay;5200+spawnD+spawnDt*5-5400,
pattAdd,bp_cleave_fixed,
,,,
timeRepeating,5500,15000,
condVarCheck,sign2,>,0,
pattVars,warningDelay;spawnD+spawnDt*3+3700-5500,spawnDelay;5200+spawnD+spawnDt*5-5500,radius;circleRadiusDef(1),trgBinary;all,warnMsg;2,
pattAdd,bp_circle_spreads,
,,,
timeRepeating,5500,15000,
condVarCheck,sign2,<,0,
condVarCheck,allyNum,>,2,
orderBinRandom,1,1,1,1,
pattVars,warningDelay;spawnD+spawnDt*3+3700-5500,spawnDelay;5200+spawnD+spawnDt*5-5500,radius;circleRadiusDef(1),trgBinary;orderBin0|orderBin2,warnMsg;2,hasFixed;0,element;red,
pattAdd,bp_colormatch,
pattVars,trgBinary;orderBin1|orderBin3,element;blue,
pattAdd,bp_colormatch,
,,,
timeRepeating,5500,15000,
condVarCheck,sign2,<,0,
condVarCheck,allyNum,<,3,
setVar,targetP,randomTargetId(all),
pattVars,warningDelay;spawnD+spawnDt*3+3700-5500,spawnDelay;5200+spawnD+spawnDt*5-5500,radius;250,targetId;targetP,warnMsg;2,number;30,spd;12,element;red,doubled;0,
pattAdd,bp_prscircle_follow,
,,,
,,,
time,48000
pattAdd,enrage_common,
,,,
,,,
,,,
,,,
,,,
newPattern,add_card_circle,
time,0,
setVar,bx,offX_0,
setVar,by,offY_0,
setVar,warnD,offX_1,
setVar,spawnD,offY_1,
setVar,card,offX_2,
setVar,wid,offY_2,
setVar,turn,offX_3,
pattVarReset,
,,,
time,100,
condVarCheck,card,==,0,
pattVars,warningDelay;warnD-100,warningDelay2;spawnD-100,spawnDelay;spawnD-100,eraseDelay;spawnD+400,rot;0,width;wid,warnMsg;0,
pattAddPos,bp_cardinal_r,bx,by,
,,,
time,100,
condVarCheck,card,!=,0,
pattVars,warningDelay;warnD-100,spawnDelay;spawnD-100,radius;240,angle;randomRange(0>360),number;30,spd;15,element;red,doubled;1,warnMsg;0,
pattAddPos,bp_prscircle,bx,by,
,,,
time,200,
pattVars,warningDelay;warnD-200,spawnDelay;spawnD-200,displayNumber;turn,warnMsg;2,
pattPosition,bx;by,
pattAdd,bp_displaynumbers,
